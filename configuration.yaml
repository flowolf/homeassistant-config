homeassistant:
  # Name of the location where Home Assistant is running
  name: !secret name_home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret lat
  longitude: !secret lon
  # Impacts weather/sunrise data
  elevation: 459
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/Vienna

  customize: !include customize.yaml

zone 1:
  name: !secret zone1_name
  latitude: !secret lat
  longitude: !secret lon
  radius: 40

zone 2:
  name: !secret zone2_name
  icon: mdi:factory
  latitude: !secret lat_zone2
  longitude: !secret lon_zone2
  radius: 90

zone 3:
  name: !secret zone3_name
  icon: mdi:castle
  latitude: !secret lat_zone3
  longitude: !secret lon_zone3
  radius: 150

zone 4:
  name: !secret zone4_name
  icon: mdi:wrench
  latitude: !secret lat_zone4
  longitude: !secret lon_zone4
  radius: 40


# Show links to resources in log and frontend
#introduction:

# Enables the frontend
frontend:
  themes:
    darkcyan:
    # Main colors that can be changed
      primary-color: "#00bcd4"
      disabled-text-color: "#545454"
      divider-color: "rgba(255, 255, 255, 0.12)"
      paper-card-background-color: "#4e4e4e"
      paper-grey-200: "#191919"
      paper-item-icon-color: "#d3d3d3"
      paper-listbox-background-color: "#202020"
      paper-listbox-color: "#FFFFFF"
      primary-background-color: "#303030"
      primary-text-color: "#cfcfcf"
      secondary-background-color: "#2b2b2b"
      secondary-text-color: "#04a7bc"
    # Colors based on variables, see above
      label-badge-background-color: "var(--secondary-background-color)"
      label-badge-text-color: "var(--text-primary-color)"
      paper-card-header-color: "#var(--paper-item-icon-color)"
      paper-grey-50: "var(--primary-text-color)"
      paper-item-icon-active-color: "var(--primary-color)"
      paper-item-icon_-_color: "var(--primary-text-color)"
      paper-slider-active-color: "var(--primary-color)"
      paper-slider-knob-color: "var(--primary-color)"
      paper-slider-knob-start-color: "var(--primary-color)"
      paper-slider-pin-color: "var(--primary-color)"
      paper-slider-secondary-color: "var(--light-primary-color)"
      paper-toggle-button-checked-ink-color: "var(--dark-primary-color)"
      paper-toggle-button-checked-button-color: "var(--primary-color)"
      paper-toggle-button-checked-bar-color: "var(--light-primary-color)"
      paper-toggle-button-unchecked-bar-color: "var(--primary-text-color)"



http:
  api_password: !secret api_password

# Checks for available updates
updater:

# Discover some devices automatically
discovery:

config:

# Allows you to issue voice commands from the frontend in enabled browsers
#conversation:

# Enables support for tracking state changes over time.
history:

# NoSQL really pounded the SD-card of my Raspberry Pi
# trying external USB-stick
recorder:
  db_url: !secret external_sqlite_url
#  purge_interval: 3
#  purge_keep_days: 14
#  db_url: !secret mariadb_url

# View all events in a logbook
logbook:

# Track the sun
sun:

#shell_command: !include shell_command.yaml

switch: !include switches.yaml

# Groups
group: !include groups.yaml

camera: !include camera.yaml

mqtt:
  broker: localhost
  port: 1883
  username: !secret mqtt_user
  password: !secret mqtt_pwd

tradfri:
  host: !secret tradfri_ip
# do not use the API_KEY from v0.57 and above!
#  api_key: !secret tradfri_security_key

zwave:
  usb_path: /dev/ttyACM0
  #config_path: /srv/homeassistant/src/open-zwave-control-panel/config
  #config_path: /usr/local/lib/python3.4/dist-packages/libopenzwave-0.3.1-py3.4-linux-armv7l.egg/config/

xiaomi_aqara:
  gateways:
    - mac: !secret xiaomi_gw_mac
      key: !secret xiaomi_gw_key

vacuum:
  - platform: xiaomi_miio
    host: 192.168.3.138
    token: !secret xiaomi_vacuum_key

android_ip_webcam:
  - host: !secret android_ip_cam_ip
    name: "Balkon"
    username: !secret android_ipc_user
    password: !secret android_ipc_pass
    scan_interval: 60
    sensors:
      - light

binary_sensor: !include_dir_merge_list binary_sensors/

sensor: !include_dir_merge_list sensors/
#sensor 1:
#  platform: yr

media_player:
  - platform: kodi
    host: !secret kodi_IP
    port: !secret kodi_port
    name: "osmc-Waldo"
    turn_on_action:
      service: wake_on_lan.send_magic_packet
      data:
        mac: !secret kodi_mac_address
        broadcast_address: !secret broadcast_IP
#      service: media_player.kodi_call_method
#      data:
#        entity_id: media_player.kodi
#        method: Addons.ExecuteAddon
#        addonid: script.json-cec
#        params:
#          command: activate
    turn_off_action:
#      - service: media_player.media_stop
#        data:
#          entity_id: media_player.kodi
      - service: media_player.kodi_call_method
        data:
          entity_id: media_player.kodi
          method: System.suspend
          # method: Addons.ExecuteAddon
          # addonid: script.json-cec
          # params:
          #  command: standby
#    turn_off_action: none

# not working as expected... put asleep
  - platform: samsungtv
    # UE55MU6170UXZG
    # requires pip3 install websocket-client
    host: !secret samsung_smart_tv
    mac: !secret samsung_smart_tv_mac
    port: 8001
    name: "TV"

  - platform: snapcast
    host: !secret snapcast_main_ip
  - platform: mpd
    host: !secret mpd_main_ip
    port: 6601


device_tracker: !include device_tracker.yaml


###### fancy lights ######
light:
  - platform: mqtt
    name: "LEDstrip"
    command_topic: "esp8266/mqttstrip/setpower"
    state_topic: "esp8266/mqttstrip/setpowerpub"
    rgb_state_topic: "esp8266/mqttstrip/setcolorpub"
    rgb_command_topic: "esp8266/mqttstrip/setcolor"
    brightness_state_topic: "esp8266/mqttstrip/setbrightnesspub"
    brightness_command_topic: "esp8266/mqttstrip/setbrightness"
    optimistic: false
#  - platform: mqtt
#    name: 'B1 Light TEST'
#    state_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/relay/0'
#    command_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/relay/0/set'
#    payload_on: 1
#    payload_off: 0
#    rgb_state_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/color'
#    rgb_command_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/color/set'
#    rgb: true
#    optimistic: false
#    color_temp: true
#    color_temp_command_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/mired/set'
#    brightness: true
#    brightness_command_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/brightness/set'
#    brightness_state_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/brightness'
#    white_value: true
#    white_value_command_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/channel/3/set'
#    white_value_state_topic: '/br38/sonoff/light/SONOFF_B1_8677F2/channel/3'


  - platform: mqtt
    name: "wordclock"
    command_topic: "/wordclock-01201b00/wordclock/command"
    rgb_state_topic: "/wordclock-01201b00/wordclock/color"
    rgb_command_topic: "/wordclock-01201b00/wordclock/color"
    brightness_command_topic: "/wordclock-01201b00/wordclock/brightness"
    retain: True


input_select:
  ledstrip_effect:
    name: LEDstrip Effect
    options:
     - "Solid"
     - "BPM"
     - "Confetti"
     - "Cyclon Rainbow"
     - "Dots"
     - "Fire"
     - "Glitter"
     - "Juggle"
     - "Lightning"
     - "Noise"
     - "Police All"
     - "Police One"
     - "Rainbow"
     - "Ripple"
     - "Sinelon"
     - "Solid"
     - "Twinkle"
    initial: "Solid"
  wordclock_effect:
    name: wordclock effect
    options:
     - "clock"
     - "rgb_sparcle"
     - "blue_sparcle"
    initial: "clock"

#input_slider:
input_number:
  ledstrip_animation_speed:
    name: LEDstrip Animation Speed
    initial: 150
    min: 1
    max: 150
    step: 10

automation 12:
  - alias: "LEDstrip Input Effect"
    initial_state: True
    hide_entity: False
    trigger:
      - platform: state
        entity_id: input_select.ledstrip_effect
    action:
      - service: mqtt.publish
        data_template:
          topic: "esp8266/mqttstrip/seteffect"
          payload: '{{ trigger.to_state.state | string }}'

  - alias: "LEDstrip Animation Speed"
    initial_state: True
    hide_entity: False
    trigger:
      - platform: state
        entity_id: input_number.ledstrip_animation_speed
    action:
      - service: mqtt.publish
        data_template:
          topic: "esp8266/mqttstrip/setanimationspeed"
          payload: '{{ trigger.to_state.state | int }}'

  - alias: "wordclock update"
    initial_state: True
    hide_entity: False
    trigger:
      - platform: state
        entity_id: input_select.wordclock_effect
    action:
      - service: mqtt.publish
        data_template:
          topic: "/wordclock-01201b00/wordclock/command"
          payload: '{{ trigger.to_state.state | string }}'

notify: !include notify.yaml

scene: !include scenes.yaml
#script: !include_dir_list script/

script: !include_dir_named scripts/

automation: !include_dir_merge_list automations/

# via https://github.com/arsaboo/homeassistant-config/blob/01ed7ded33f7cc64ad878f123d3f2118dd77ba07/configuration.yaml#L288
logger:
  # levels: notset, debug, info, warn, warning, error, fatal, critical
  default: warn
  logs:
    homeassistant.core: warn
    # supress 'unparsed data' WARNING from AndroidIPCam
    urllib3.connectionpool: critical

input_boolean: !include input_booleans.yaml

input_datetime:
  time_wakeup_lights:
    name: Time for wakeup lights
    has_date: false
    has_time: true
    # initial: "6:43"
